<blockquote class="padsing" style="text-decoration: none;">
  <p class="auto">{{ .Get "author" | markdownify}}, <a style="font-style:italic">{{ .Get "title" }}</a>,
    <a style="font-weight: bold;">{{ .Get "pub" }}</a>,
    {{ if (.Get "year") }}
    ({{ .Get "year" }}),
    {{ end }}
    {{ if ( .Get "data") }}
    {{ .Get "data"}}.
    {{ end }}
    {{ if (.Get "volume") }}
    Volume {{ .Get "volume" }},
    {{ end }}
    {{ if (.Get "number") }}
    Issue {{ .Get "number" }},
    {{ end }}
    {{ if (.Get "pages") }}
    Pages {{ .Get "pages" }}.
    {{ end }}
    {{if (.Get "online")}}
    Published Online.
    {{ end }}
    <br>
  <div class="publication-row">

    {{ $doi := .Get "doi" }}
    {{ $bib := .Get "bib" }}
    {{ $pdf := .Get "ref" }} {{ with $doi }}
    <span class="doi-text">
      doi: <a href="https://doi.org/{{ . }}" target="_blank">{{ . }}</a>
    </span>
    {{ end }}

    <div style="float: right;">

      {{ if $pdf }}
      {{/* 尝试在当前页面的资源里找这个文件 */}}
      {{ $pdfResource := .Page.Resources.GetMatch $pdf }}

      {{/* 如果找到了资源，用资源的链接；如果没找到，就用原本的字符串(可能是外部链接) */}}
      {{ $pdfLink := "" }}
      {{ if $pdfResource }}
      {{ $pdfLink = $pdfResource.RelPermalink }}
      {{ else }}
      {{ $pdfLink = $pdf }}
      {{ end }}

      <a class="badge-link" href="{{ $pdfLink }}" target="_blank">PDF</a>
      {{ end }}

      {{ if $bib }}
      {{/* 同样逻辑：去资源里找文件 */}}
      {{ $bibResource := .Page.Resources.GetMatch $bib }}

      {{ $bibLink := "" }}
      {{ if $bibResource }}
      {{ $bibLink = $bibResource.RelPermalink }}
      {{ else }}
      {{ $bibLink = $bib }}
      {{ end }}

      &nbsp;
      <a class="badge-bib" href="{{ $bibLink }}" target="_blank">BIB</a>
      {{ end }}

    </div>
    <div style="clear: both;"></div>
  </div>
  </p>
</blockquote>